{% extends 'base.html' %}
{% block title %}Process â€” LUMINA_SORT{% endblock %}

{% block content %}
<div class="page-container wide">
    <div class="page-header">
        <h1>Configure Processing</h1>
        <p class="page-subtitle">{{ art_piece.title }}</p>
    </div>
    
    <div class="process-layout">
        <div class="preview-panel">
            <h3>Original Image</h3>
            <div class="image-frame">
                <img src="{{ art_piece.original_image.url }}" alt="Original">
            </div>
        </div>
        
        <div class="controls-panel">
            <form method="post" class="process-form">
                {% csrf_token %}
                
                <div class="control-section">
                    <h3>Use a Recipe</h3>
                    <select name="recipe" class="select-input">
                        <option value="">-- Custom Settings --</option>
                        {% for recipe in recipes %}
                        <option value="{{ recipe.id }}">{{ recipe.name }}</option>
                        {% endfor %}
                    </select>
                </div>
                
                <div class="control-divider">
                    <span>OR</span>
                </div>
                
                <div class="control-section">
                    <h3>Custom Parameters</h3>
                    
                    <div class="slider-group">
                        <label>
                            Threshold Low: <span id="low-value">0.25</span>
                        </label>
                        <input type="range" name="threshold_low" 
                               min="0" max="1" step="0.01" value="0.25"
                               class="slider" id="threshold-low">
                    </div>
                    
                    <div class="slider-group">
                        <label>
                            Threshold High: <span id="high-value">0.80</span>
                        </label>
                        <input type="range" name="threshold_high" 
                               min="0" max="1" step="0.01" value="0.80"
                               class="slider" id="threshold-high">
                    </div>
                    
                    <div class="form-group">
                        <label>Sort Direction</label>
                        <div class="radio-group">
                            <label class="radio-label">
                                <input type="radio" name="sort_direction" value="V" checked>
                                <span>Vertical</span>
                            </label>
                            <label class="radio-label">
                                <input type="radio" name="sort_direction" value="H">
                                <span>Horizontal</span>
                            </label>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>Sort By</label>
                        <select name="sort_by" class="select-input">
                            <option value="L">Luminosity</option>
                            <option value="H">Hue</option>
                            <option value="S">Saturation</option>
                            <option value="R">Red Channel</option>
                            <option value="G">Green Channel</option>
                            <option value="B">Blue Channel</option>
                        </select>
                    </div>
                    
                    <div class="checkbox-group">
                        <label class="checkbox-label">
                            <input type="checkbox" name="reverse_sort">
                            <span>Reverse Sort Order</span>
                        </label>
                    </div>
                </div>
                
                <button type="submit" class="btn-solid btn-full btn-large">
                    Process Image
                </button>
            </form>
        </div>
    </div>
</div>

{% block extra_js %}
<script>
    const lowSlider = document.getElementById('threshold-low');
    const highSlider = document.getElementById('threshold-high');
    const lowValue = document.getElementById('low-value');
    const highValue = document.getElementById('high-value');
    
    lowSlider.addEventListener('input', () => {
        lowValue.textContent = parseFloat(lowSlider.value).toFixed(2);
    });
    
    highSlider.addEventListener('input', () => {
        highValue.textContent = parseFloat(highSlider.value).toFixed(2);
    });
</script>
{% endblock %}
{% endblock %}
