{% extends 'base.html' %}
{% block title %}Create Recipe â€” LUMINA_SORT{% endblock %}

{% block content %}
<div class="page-container narrow">
    <div class="page-header">
        <h1>Create Recipe</h1>
        <p class="page-subtitle">Save your sorting parameters</p>
    </div>
    
    <form method="post" class="recipe-form">
        {% csrf_token %}
        
        <div class="form-group">
            <label for="id_name">Recipe Name</label>
            <input type="text" name="name" id="id_name" 
                   placeholder="e.g., Cyberpunk Melt" required
                   value="{{ form.name.value|default:'' }}">
            {% if form.name.errors %}
            <span class="field-error">{{ form.name.errors.0 }}</span>
            {% endif %}
        </div>
        
        <div class="form-group">
            <label for="id_description">Description</label>
            <textarea name="description" id="id_description" rows="3"
                      placeholder="Describe the visual effect...">{{ form.description.value|default:'' }}</textarea>
        </div>
        
        <div class="slider-group">
            <label>
                Threshold Low: <span id="low-value">{{ form.threshold_low.value|default:"0.25" }}</span>
            </label>
            <input type="range" name="threshold_low" 
                   min="0" max="1" step="0.01" 
                   value="{{ form.threshold_low.value|default:'0.25' }}"
                   class="slider" id="threshold-low">
        </div>
        
        <div class="slider-group">
            <label>
                Threshold High: <span id="high-value">{{ form.threshold_high.value|default:"0.80" }}</span>
            </label>
            <input type="range" name="threshold_high" 
                   min="0" max="1" step="0.01" 
                   value="{{ form.threshold_high.value|default:'0.80' }}"
                   class="slider" id="threshold-high">
        </div>
        
        <div class="form-group">
            <label>Sort Direction</label>
            <div class="radio-group">
                <label class="radio-label">
                    <input type="radio" name="sort_direction" value="V" 
                           {% if form.sort_direction.value == 'V' or not form.sort_direction.value %}checked{% endif %}>
                    <span>Vertical</span>
                </label>
                <label class="radio-label">
                    <input type="radio" name="sort_direction" value="H"
                           {% if form.sort_direction.value == 'H' %}checked{% endif %}>
                    <span>Horizontal</span>
                </label>
            </div>
        </div>
        
        <div class="form-group">
            <label for="id_sort_by">Sort By</label>
            <select name="sort_by" id="id_sort_by" class="select-input">
                <option value="L" {% if form.sort_by.value == 'L' %}selected{% endif %}>Luminosity</option>
                <option value="H" {% if form.sort_by.value == 'H' %}selected{% endif %}>Hue</option>
                <option value="S" {% if form.sort_by.value == 'S' %}selected{% endif %}>Saturation</option>
                <option value="R" {% if form.sort_by.value == 'R' %}selected{% endif %}>Red Channel</option>
                <option value="G" {% if form.sort_by.value == 'G' %}selected{% endif %}>Green Channel</option>
                <option value="B" {% if form.sort_by.value == 'B' %}selected{% endif %}>Blue Channel</option>
            </select>
        </div>
        
        <div class="checkbox-group">
            <label class="checkbox-label">
                <input type="checkbox" name="reverse_sort" {% if form.reverse_sort.value %}checked{% endif %}>
                <span>Reverse Sort Order</span>
            </label>
        </div>
        
        <div class="checkbox-group">
            <label class="checkbox-label">
                <input type="checkbox" name="is_public" {% if form.is_public.value != False %}checked{% endif %}>
                <span>Make Public (others can use this recipe)</span>
            </label>
        </div>
        
        <button type="submit" class="btn-solid btn-full">Save Recipe</button>
    </form>
</div>

{% block extra_js %}
<script>
    const lowSlider = document.getElementById('threshold-low');
    const highSlider = document.getElementById('threshold-high');
    const lowValue = document.getElementById('low-value');
    const highValue = document.getElementById('high-value');
    
    lowSlider.addEventListener('input', () => {
        lowValue.textContent = parseFloat(lowSlider.value).toFixed(2);
    });
    
    highSlider.addEventListener('input', () => {
        highValue.textContent = parseFloat(highSlider.value).toFixed(2);
    });
</script>
{% endblock %}
{% endblock %}
